<!DOCTYPE html>
<html>
<head>
  <title>JavaScript Background Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    
    h1 {
      margin-bottom: 10px;
    }
    
    p {
      margin-bottom: 5px;
    }
    
    button {
      margin-top: 10px;
      padding: 5px 10px;
      font-size: 16px;
    }
    
    #results {
      margin-top: 20px;
      font-family: monospace;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>JavaScript Background Test</h1>
  <p>Switch to a different app or tab, then come back to this page.</p>
  <p>The results will be displayed below:</p>
  
  <button id="toggleButton">Start Test</button>
  
  <div id="results"></div>

  <script>
    let startTime;
    let elapsedTime;
    let expectedTime;
    let counter = 0;
    let intervalId;
    
    const resultsDiv = document.getElementById('results');
    const toggleButton = document.getElementById('toggleButton');
    
    function testBackgroundExecution() {
      if (!startTime) {
        startTime = Date.now();
      }

      counter++;
      expectedTime = counter * 100;

      elapsedTime = Date.now() - startTime;
      const result = `Elapsed time: ${elapsedTime}ms, Expected time: ${expectedTime}ms`;
      resultsDiv.insertAdjacentHTML('afterbegin', result + '<br>');
    }
    
    function startTest() {
      intervalId = setInterval(testBackgroundExecution, 100);
      toggleButton.textContent = 'Stop Test';
    }
    
    function stopTest() {
      clearInterval(intervalId);
      toggleButton.textContent = 'Start Test';
    }
    
    function toggleTest() {
      if (intervalId) {
        stopTest();
      } else {
        startTest();
      }
    }
    
    toggleButton.addEventListener('click', toggleTest);
  </script>
</body>
</html>
